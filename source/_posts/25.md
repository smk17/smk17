title: 〖原创〗无聊搞搞GPS之解析NMEA0183 协议
date: 2014-04-02 10:49:30
categories: 技术
tags: [NMEA0183,GPS]
---
{% note default %}
系统：debian7.4
GPS模块：美国SIRF3 SIRF三代
编译器：gcc
{% endnote %}

恩,近排买了个GPS模块,就用它来定定位啦！(我买的GPS模块地址：[http://item.taobao.com/item.htm?spm=a1z09.5.0.0.WQseGD&id=6267607210](http://item.taobao.com/item.htm?spm=a1z09.5.0.0.WQseGD&id=6267607210)) 该模块呢，芯片是SIRF3，输出是标准NMEA0183协议数据，接口是PL2303 。<!--more-->

随便在linux下写了个C程序，编译执行得到下面这一串数据：
```
$GPGGA,014651.000,2303.6024,N,11324.1703,E,1,06,1.4,59.0,M,-6.0,M,,00007D
$GPGSA,A,3,05,24,29,15,12,18,,,,,,,2.5,1.4,2.135
$GPRMC,014651.000,A,2303.6024,N,11324.1703,E,0.14,27.08,010414,,,A53
```
这里我们只解析GPGGA（GPS定位信息）的信息。
```
$GPGGA,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,M,<10>,M,<11>,<12>xx<CR><LF>
$GPGGA：起始引导符及语句格式说明(本句为GPS定位数据)；
<1> UTC时间，格式为hhmmss.sss；
<2> 纬度，格式为ddmm.mmmm(第一位是零也将传送)；
<3> 纬度半球，N或S(北纬或南纬)
<4> 经度，格式为dddmm.mmmm(第一位零也将传送)；
<5> 经度半球，E或W(东经或西经)
<6> 定位质量指示，0=定位无效，1=定位有效；
<7> 使用卫星数量，从00到12(第一个零也将传送)
<8> 水平精确度，0.5到99.9
<9> 天线离海平面的高度，-9999.9到9999.9米 M 指单位米
<10> 大地水准面高度，-9999.9到9999.9米 M 指单位米
<11> 差分GPS数据期限(RTCM SC-104)，最后设立RTCM传送的秒数量
<12> 差分参考基站标号，从0000到1023(首位0也将传送)。
```

1. 时间，这个是格林威治时间，是世界时间（UTC），我们需要把它转换成北京时间（BTC），BTC和UTC差了8个小时，要在这个时间基础上加8个小时。
2. 纬度，我们需要把它转换成地球经纬度的格式，计算方法：
如接收到的纬度是：2303.6024
2303.6024 / 100 = 23.036024 可以直接读出23度
2303.6024–23* 100 = 3.6024
3.6024/ 60 = 0.06004
所以纬度是：23.06004°。
3. 南北纬，这个位有两种值‘N’（北纬）和‘S’（南纬）
